<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:jsp="http://java.sun.com/JSP/Page"
      xmlns:t="/WEB-INF/tlds/scroller"
      xmlns:ice="http://www.icesoft.com/icefaces/component">
<head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>
<body>
<ui:composition template="/template.xhtml">
<ui:param name="pageTitle" value="Analysis and Subsetting - #{VDCRequest.dataversePageTitle}"/>
  <ui:define name="body">
      <f:loadBundle basename="BundleAnalysis" var="bundleAnalysis"/>
        <script type="text/javascript">
          //<![CDATA[
                // share-remoting related code
                var req=null;
                var cellId;
                var QSrootNodeIdPrefix = "quickSummaryStatTableRootDiv_";
                //var rx =   /\S+:(\d+):showStatistics$/ ;
                var timeoutId;
                function isQStableAttached(rowId){
                 // this function tells whether a QS table is already
                 // attached to the cell
                    //var QSrootId = getQSrootId(imageBttnId);
                    var QSrootNode = document.getElementById(QSrootNodeIdPrefix+rowId);

                    var attached=false;
                    if (QSrootNode){
                        attached = true;
                        //alert("QS table is attached");
                    }
                    return attached;
                }

                function getQSrootId(imageBttnId){
                    var tokens = imageBttnId.split(/:/);
                    var vId = tokens[tokens.length - 2];
                    var QSrootId = imageBttnId.replace(/showStatistics$/, "varSummaryTable");
                    return QSrootId;
                }

                function QSrequested(bttnId, rowId){
                    /*
                    var tokens = bttnId.split(/:/);
                    var vId = tokens[tokens.length - 2];
                    cellId = bttnId.replace(/showStatistics$/, "varSummaryTable");
                    */
                    cellId = getQSrootId(bttnId);
                    var displayRootNode = document.getElementById(cellId);
                    //alert("display attr="+displayRootNode.style.display);
                    if (displayRootNode.style.display == "") {
                        //alert("display attr is ''");
                    }
                    if (displayRootNode.style.display == undefined) {
                        //alert("display attr is undefined");
                    }
                    if ((displayRootNode.style.display == "none") ||
                        (displayRootNode.style.display == "")){
                        // show the cell
                        displayRootNode.style.display = "block";
                        // attache the table if not attached
                        //alert("show case");
                        if (!isQStableAttached(rowId)){
                            //alert("make an ajax call");
                            var cntxpth = "${request.contextPath}";
                            var afterCntxpth = "/sumStat" + "\x3F" + "dtId=#{AnalysisPage.dtId}";
                            var qsString = cntxpth + afterCntxpth;
                            var ampVId = "\x26" + "varId=";
                            qsString = qsString + ampVId + rowId;
                            sendRequest(qsString, processQSrequest);
                        }
                    } else if (displayRootNode.style.display == "block"){
                        // hide the cell
                        //alert("hide case");
                        displayRootNode.style.display = "none";
                    }
                }

                function sendRequest(url, handler) {
                    initXHR();
                    if (req) {
                        try {
                            req.onreadystatechange = handler;
                            req.open("GET", url, true);
                            timeoutId = setTimeout(timesUp, 10000);
                            req.send(null);
                        } catch (errv){
                            alert(
                                "The browser failed to contact the server.\n"+
                                "Please try again later.\n"+
                                "Error message:"+errv.message);
                        }
                    } else {
                        alert("Summary statistics cannot be displayed:\n"+
                                "Your browser is incapable of remote-scripting.");
                    }
                }

                function initXHR() {
                    if(window.XMLHttpRequest) {
                        req = new XMLHttpRequest();
                    }
                    else if(window.ActiveXObject) {
                        req = new ActiveXObject("Microsoft.XMLHTTP");
                    }
                }

                function processQSrequest() {
                    if (req.readyState != 4) {
                        return;
                    }
                    clearTimeout(timeoutId);
                    if (req.status == 200){
                        var QStable = req.responseText;
                        if (QStable){
                            //alert("returned contents = "+QStable);
                            document.getElementById(cellId).innerHTML = QStable;
                        } else {
                            alert("Summary statistics cannot be displayed.\n"+
                            "The browser got an empty string from the server");
                        }
                    } else if (req.status == 304){
                        alert("Summary statistics cannot be displayed: 304 error");
                    } else {
                        alert("Summary statistics cannot be displayed: status code="+req.status);
                    }
                }

                function timesUp (){
                    req.abort();
                    alert("The browser failed to get summary statistics from the server.\n"+
                          "Please make sure of your internet connection and try again later");
                }

                function editVariables() {
                    var varList = document.getElementById("form1:tabSet1:0:mListboxDwnld");
                    var dvFilter = "";

                    for (var i=0; i < varList.options.length; i++) {
                        if (dvFilter == "") {
                            dvFilter = "&dvFilter=" + varList.options[i].value;
                        } else {
                            dvFilter += "," + varList.options[i].value;
                        }
                    }

                    window.location.href="/dvn#{VDCRequest.currentVDCURL}/faces/study/EditVariablePage.xhtml?dtId=#{AnalysisPage.dtId}" + dvFilter;
                }
           // ]]>
            </script>
     
<!-- to be renamed to subview -->

<!-- f:loadBundle basename="vdcnetwar.analysis.AnalysisResources" var="i18nres"/ -->

<!-- html top boiler-plate block -->    

    <ice:form id="form1" >
    <input type="hidden" name="dtId" value="${param.dtId}"/>

    <ice:inputHidden id="vdcId" value="#{VDCRequest.currentVDCId}"/>

    <div class="dvn_section">
        
        <div class="dvnstudytitleblock">
            <div class="dvnstudyadminboxfloat dvn_right">
                <ice:outputLink 
                    value="/dvn#{VDCRequest.currentVDCURL}/faces/study/StudyPage.xhtml?studyId=#{AnalysisPage.studyId}&amp;tab=files#{VDCRequest.studyListingIndexAsParameter}"
                    rendered="#{AnalysisPage.versionNumber == null}">
                    <ice:outputText 
                        value="Back to Study"/>                       
                </ice:outputLink>
                <ice:outputLink 
                value="/dvn#{VDCRequest.currentVDCURL}/faces/study/StudyPage.xhtml?studyId=#{AnalysisPage.studyId}&amp;versionNumber=#{AnalysisPage.versionNumber}&amp;tab=files#{VDCRequest.studyListingIndexAsParameter}"
                    rendered="#{AnalysisPage.versionNumber != null}">
                    <ice:outputText 
                        value="Back to Study"/>                       
                </ice:outputLink>
            </div>
            <ui:include src="/study/StudyTitleFragment.xhtml">
                <ui:param name="studyUI" value="#{AnalysisPage.studyUI}"/>
                <ui:param name="displayReleaseLink" value="false"/>
                <ui:param name="displayVersionInfo" value="true"/>
                <ui:param name="displayStatusBox" value="true"/>
                <ui:param name="displayFileName" value="#{AnalysisPage.fileName}"/>
            </ui:include>
        </div>
        
        <div class="dvn_sectionBoxNoBorders">  

            <!--tab block starts here -->
        
            <!-- ui:tabSet binding="{AnalysisPage.tabSet1}" id="tabSet1" lite="true" mini="true" selected="{AnalysisPage.tab}" styleClass="vdcStudyTabSet" -->
            <ice:panelTabSet id="tabSet1"
                binding="#{AnalysisPage.tabSet1}"
                tabChangeListener="#{AnalysisPage.processTabChange}">
                
<!-- 1. Download -->
<ice:panelTab id="tabDwnld"
    label="#{bundleAnalysis['dwnld.tab.text']}"
    title="Variable Selection and Downloading">

    <ice:panelGrid id="layoutPanel3"
        columns="1" style="width: 100%;">

        <ice:panelGrid  id="gridPanel4"
            columns="2" 
            cellpadding="0" cellspacing="0" 
            columnClasses="vdcAnalysisCol1, vdcAnalysisCol2" 
            width="100%">

            <ice:panelGrid id="groupPanel2" 
                columns="1">
                <ice:outputLabel id="mListboxDwnldLabel" 
                    for="mListboxDwnld" 
                    value="#{bundleAnalysis['dwnld.selectedVarBox.title']}" />
                <ice:selectManyListbox id="mListboxDwnld" 
                    size="10" 
                    disabled="true">
                    <f:selectItems id="itemsDwnld"  
                         value="#{AnalysisPage.varSetAdvStat}"/>                
                </ice:selectManyListbox>
            </ice:panelGrid>

            <ice:panelGrid id="groupPanel5"
                columns="1">
                    <ice:column>
                <ice:panelGroup styleClass="vdcHelpText">
                    <ice:graphicImage
                        alt="Information"
                        title="Information"
                        value="/resources/images/icon_info.gif" />
                    <ice:outputText id="outputText13"
                        value="#{bundleAnalysis['dwnld.instruction']}"/>
                </ice:panelGroup>

                <ice:selectOneRadio id="dtdwnld"  
                   binding="#{AnalysisPage.dwnldFileTypeSet}" 
                   value="#{AnalysisPage.dwnldFileTypeSelected}"
                   partialSubmit="true"
                   immediate="true"
                   onclick="setHiddenField(this);"
                   layout="pageDirection">
                    <f:selectItem id="dwnldFileTypeText"  itemLabel="#{bundleAnalysis['dwnld.fileType.text']}" itemValue="#{AnalysisPage.dwnldFileTypeItems[0]}"/>
                    <f:selectItem id="dwnldFileTypeRdata" itemLabel="#{bundleAnalysis['dwnld.fileType.Rdata']}" itemValue="#{AnalysisPage.dwnldFileTypeItems[1]}"/>
                    <f:selectItem id="dwnldFileTypeSplus" itemLabel="#{bundleAnalysis['dwnld.fileType.Splus']}" itemValue="#{AnalysisPage.dwnldFileTypeItems[2]}"/>
                    <f:selectItem id="dwnldFileTypeStata" itemLabel="#{bundleAnalysis['dwnld.fileType.stata']}" itemValue="#{AnalysisPage.dwnldFileTypeItems[3]}"/>
                </ice:selectOneRadio>
                        <!--  binding="#{AnalysisPage.hiddenSelectedFileType}" -->
                        <ice:inputHidden id="hiddenDataDownload"
                                         binding="#{AnalysisPage.hiddenSelectedFileType}"
                                         value="#{AnalysisPage.dwnldFileTypeSelected}"
                                         valueChangeListener="#{AnalysisPage.processDwnldFileType}"/>
                <!-- message block submit button -->
                <ice:panelGrid
                    id="dwnldButtonArea">
                    <br/>
                    <ice:panelGrid id="pgDwnldErrMsg"
                        binding="#{AnalysisPage.pgDwnldErrMsg}"
                        rendered="false"
                        style="margin:4px 4px;padding:10px;" >
                        <ice:graphicImage 
                            alt="Error" 
                            title="Error" 
                            styleClass="vdcNoBorders" 
                            style="vertical-align: middle" 
                            value="/resources/images/error_small.gif"
                            rendered="false"/>
                        <ice:outputText id="msgDwnldButton"
                            binding="#{AnalysisPage.msgDwnldButton}" 
                            visible="false" 
                            escape="true" 
                            styleClass="errorMessage"

                            text="#{AnalysisPage.msgDwnldButtonTxt}"
                            />
                    </ice:panelGrid>
                    <br />

                    <ice:commandButton id="dwnldBttn"
                        binding="#{AnalysisPage.dwnldButton}"
                        disabled="true"
                        onclick="disableThis(this);"
                        type="submit" 
                        style="margin-top:10px"
                        value="#{bundleAnalysis['dwnld.button.submit']}" 
                        action="#{AnalysisPage.dwnldAction}" >
                    </ice:commandButton>
                    
<ice:outputResource id="dwnloadSubsetButton"
                    binding="#{AnalysisPage.dwnloadSubsetButton}"
                    resource="#{AnalysisPage.zipResourceDynFileName}" 
                    mimeType="application/octet-stream"
                    value="Download Replication-ZIP File" 
                    fileName="#{AnalysisPage.zipFileName}" 
                    type="button" 
                    shared="false"/>
                </ice:panelGrid>
                    </ice:column>

            </ice:panelGrid>

        </ice:panelGrid>
        <!-- Edit-variable block-->
        <ice:panelGrid block="true" 
            columns="1"
            rendered="false"
            style="padding-top:10px; padding-bottom:10px;">
            <ice:outputLink value="javascript:editVariables()">
                <ice:outputText  value="Edit selected variables"/>
            </ice:outputLink>
            <ice:outputText id="linkAction5HelpText" 
                styleClass="vdcHelpText" 
                value="(If no variables are selected, all variables will be displayed in Edit Variables page.)"/>
        </ice:panelGrid>
    </ice:panelGrid>
</ice:panelTab>
                
                
<!-- 2. Recode -->
<ice:panelTab
    id="tabRecode"
    label="#{bundleAnalysis['recode.tab.text']}"
    title="Recoding and Case Selection">

    <ice:outputText id="msgRecodeUnavailable"
        visible="true"
        escape="false"
        styleClass="errorMessage"
		value="Recode functionality is temporarily unavailable. It is expected to be made available again in the next release. -- the DVN development team."/>


<!--    <ice:panelGrid id="layoutPanel2"-->
<!--        columns="1"-->
<!--        cellpadding="0"-->
<!--        cellspacing="0"-->
<!--        style="width: 100%;">-->
<!--        <ice:panelGrid  id="gridPanel7"-->
<!--              cellpadding="0" -->
<!--              cellspacing="0" -->
<!--              columnClasses="vdcAnalysisCol1, vdcAnalysisCol2" -->
<!--              columns="2" width="100%">-->
            <!-- 1st column -->
<!--            <ice:panelGrid id="groupPanel10"-->
<!--                columns="2">-->
<!--                <ice:panelGrid -->
<!--                    columns="1">-->
<!--                    <ice:outputLabel id="listboxRecodeLabel" -->
<!--                        for="listboxRecode" -->
<!--                        value="#{bundleAnalysis['advStat.selectedVarBox.title']}" />                                -->
<!--                    <ice:selectOneListbox id="listboxRecode" -->
<!--                        binding="#{AnalysisPage.listboxRecode}"-->
<!--                        immediate="true"-->
<!--                        value="#{AnalysisPage.selectedRecodeVariable}"-->
<!--                        valueChangeListener="#{AnalysisPage.recodeVariableChanged}"-->
<!--                        size="10" >-->
<!--                        <f:selectItems id="itemsRecode"  -->
<!--                             value="#{AnalysisPage.varSetAdvStat}"/>                                     -->
<!--                    </ice:selectOneListbox>-->
<!--                </ice:panelGrid>-->
<!--                -->
<!--                <ice:panelGroup id="groupPanelRecodeMiddleColumn">-->
<!--                    <ice:commandButton id="moveRecodeVarBttn"-->
<!--                        binding="#{AnalysisPage.moveRecodeVarBttn}"-->
<!--                        actionListener="#{AnalysisPage.moveRecodeVariable}"-->
<!--                        disabled="true"-->
<!--                        style="vertical-align:top"-->
<!--                        partialSubmit="true"-->
<!--                        alt="#{bundleAnalysis['recode.button.moveVar.alt']}"  -->
<!--                        value="Start" />-->
<!--                </ice:panelGroup>-->
<!--                <ice:panelGroup>-->
<!--                    <ice:outputText id="msgMoveRecodeVarBttn"-->
<!--                        binding="#{AnalysisPage.msgMoveRecodeVarBttn}"-->
<!--                        rendered="false"-->
<!--                        escape="false"-->
<!--                        styleClass="errorMessage"/>-->
<!--                </ice:panelGroup>-->
<!--            </ice:panelGrid>-->
            <!-- end: 1st column -->
<!---->
            <!-- 2nd column -->
<!--            <ice:panelGrid id="groupPanel11" -->
<!--                columns="1">-->
                <!-- instruction lines-->
<!--                <ice:column>-->
<!--                    <ice:panelGrid id="groupPanelRecodeInstruction1"-->
<!--                        binding="#{AnalysisPage.groupPanelRecodeInstruction1}"-->
<!--                        rendered="true"-->
<!--                        columns="1">-->
<!--                        <ice:panelGroup styleClass="vdcHelpText">-->
<!--                            <ice:graphicImage-->
<!--                                alt="Information"-->
<!--                                title="Information"-->
<!--                                value="/resources/images/icon_info.gif"/>-->
<!--                            <ice:outputText id="outputText491"-->
<!--                                value="#{bundleAnalysis['recode.instruction.line1']}"/>-->
<!--                        </ice:panelGroup>-->
<!--                    </ice:panelGrid>-->
<!-- -->
<!--                <ice:panelGrid id="groupPanelRecodeInstruction2" -->
<!--                    binding="#{AnalysisPage.groupPanelRecodeInstruction2}"-->
<!--                    rendered="false"-->
<!--                    columns="1">-->
<!--                    <ice:panelGroup styleClass="vdcHelpText">-->
<!--                        <ice:graphicImage -->
<!--                            alt="Information" -->
<!--                            title="Information" -->
<!--                            value="/resources/images/icon_info.gif"/>-->
<!--                        <ice:outputText id="outputText492"-->
<!--                                        value="#{bundleAnalysis['recode.instruction.line2']}"/>-->
<!--                        <ice:outputText id="outputText493"-->
<!--                                        value="#{bundleAnalysis['recode.instruction.line3']}"/>-->
<!--                    </ice:panelGroup>-->
<!---->
<!--                    <ice:panelGroup styleClass="vdcHelpText">-->
<!--                        <ice:outputText id="rfb" escape="false" value="(" />-->
<!--                        <ice:graphicImage value="/resources/images/icon_required.gif" />-->
<!--                        <ice:outputText id="rfa"-->
<!--                            value="indicates a required field.)" />-->
<!--                    </ice:panelGroup>-->
<!--                </ice:panelGrid>-->
<!--                -->
                <!-- recoding working area -->
<!--                <ice:panelGrid id="groupPanelRecodeTableArea" -->
<!--                    binding="#{AnalysisPage.groupPanelRecodeTableArea}"-->
<!--                    rendered="false"-->
<!--                    columns="1" >-->
<!--                    -->
                    <!-- input boxes for variable name/label -->
<!--                    <ice:panelGrid id="groupPanel15" -->
<!--                        cellpadding="0" -->
<!--                        cellspacing="10px" -->
<!--                        columns="2">-->
<!---->
<!--                        <ice:panelGrid id="groupPanelRecodeNewVarInfo" -->
<!--                            binding="#{AnalysisPage.groupPanelRecodeNewVarInfo}" -->
<!--                            columns="1">-->
<!--                            <ice:panelGroup>-->
<!--                                <ice:outputText id="currentConditionVar" -->
<!--                                     value="#{bundleAnalysis['recode.currentConditionVar']}"/>-->
<!--                            </ice:panelGroup>-->
<!--                            -->
<!--                                <ice:panelGroup>    -->
<!--                                <ice:outputText id="recodeNewVarName" -->
<!--                                    value="#{bundleAnalysis['recode.newVar.name']}"/>-->
<!--                                <ice:graphicImage  value="/resources/images/icon_required.gif"/>-->
<!--                                </ice:panelGroup>-->
<!--                            -->
<!--                            <ice:panelGroup>-->
<!--                                <ice:outputText id="recodeNewVarLabel"-->
<!--                                    value="#{bundleAnalysis['recode.newVar.label']}"/>-->
<!--                            </ice:panelGroup>-->
<!--                        </ice:panelGrid>-->
<!--                        <ice:panelGrid-->
<!--                            columns="1">-->
<!--                            <ice:panelGroup>-->
<!--                            <ice:outputText id="currentRecodeVariableName"-->
<!--                                value="#{AnalysisPage.currentRecodeVariableName}"/>-->
<!--                            </ice:panelGroup>-->
<!--                            <ice:panelGroup>-->
<!--                            <ice:inputText id="recodeTargetVarName"-->
<!--                                 binding="#{AnalysisPage.recodeTargetVarName}"-->
<!--                                 immediate="true"/>-->
<!--                            </ice:panelGroup>-->
<!--                            <ice:panelGroup>-->
<!--                            <ice:inputText id="recodeTargetVarLabel"-->
<!--                                binding="#{AnalysisPage.recodeTargetVarLabel}"-->
<!--                                immediate="true"-->
<!--                                size="40"/>-->
<!--                            </ice:panelGroup>-->
<!--                        </ice:panelGrid>-->
<!--                    </ice:panelGrid>-->
                    <!-- end of variable name/label boxes-->
                    <!-- help pane -->
<!--                    <ice:panelGrid id="recodeTableHelpPanel" columns="1"-->
<!--                        binding="#{AnalysisPage.groupPanelRecodeTableHelp}">-->
<!--                        -->
<!--                            <ice:panelGroup styleClass="vdcHelpText">-->
<!--                                <ice:graphicImage-->
<!--                                    alt="Information"-->
<!--                                    title="Information"-->
<!--                                    value="/resources/images/icon_info.gif"/>-->
<!--                                <ice:outputText id="recodeHowToRecodeInstruction"-->
<!--                                                value="#{bundleAnalysis['recode.howToRecode.instruction']} "/>-->
<!--                                <ice:graphicImage-->
<!--                                    alt="Click to show the how-to information"-->
<!--                                    title="Click to show/hide how-to information"-->
<!--                                    value="/resources/images/icon_help.gif"-->
<!--                                    onclick="return shwNshwTxt('recodeDetail');"/>-->
<!--                                <div id="recodeDetail"-->
<!--                                     style="display:none">-->
<!--                                    <ice:outputText id="recodeHowToRecodeDetails"-->
<!--                                                    value="#{bundleAnalysis['recode.howToRecode.details']}"/>-->
<!--                                </div>-->
<!--                            </ice:panelGroup>                        -->
<!--                        -->
<!--                        -->
<!--                            <ice:panelGroup styleClass="vdcHelpText">-->
<!--                                <ice:graphicImage-->
<!--                                    alt="Information"-->
<!--                                    title="Information"-->
<!--                                    value="/resources/images/icon_info.gif"/>-->
<!--                                <ice:outputText id="recodeHowToSubsetInstruction"-->
<!--                                    value="#{bundleAnalysis['recode.howToSubset.instruction']} "/>-->
<!--                                <ice:graphicImage-->
<!--                                    alt="Click to show the how-to information"-->
<!--                                    title="Click to show/hide how-to information"-->
<!--                                    value="/resources/images/icon_help.gif"-->
<!--                                    onclick="return shwNshwTxt('subsetDetail');"/>-->
<!--                                <div id="subsetDetail"-->
<!--                                     style="display:none">-->
<!--                                    <ice:outputText id="recodeHowToSubsetDetails"-->
<!--                                                    value="#{bundleAnalysis['recode.howToSubset.details']}"/>-->
<!--                                </div>-->
<!--                            </ice:panelGroup>-->
<!--                        -->
<!--                            <ice:panelGroup styleClass="vdcHelpText">-->
<!--                                <ice:graphicImage-->
<!--                                    alt="Information"-->
<!--                                    title="Information"-->
<!--                                    value="/resources/images/icon_info.gif"/>-->
<!--                                <ice:outputText id="recodeHowToEnterConditionInstruction"-->
<!--                                    value="#{bundleAnalysis['recode.howToEnterCondition.instruction']} "/>-->
<!--                                <ice:graphicImage-->
<!--                                    alt="Click to show the how-to information"-->
<!--                                    title="Click to show/hide how-to information"-->
<!--                                    value="/resources/images/icon_help.gif"-->
<!--                                    onclick="return shwNshwTxt('conditionDetail');"/>-->
<!--                                <div id="conditionDetail"-->
<!--                                     style="display:none">-->
<!--                                    <ice:outputText id="recodeHowToEnterConditionDetails"-->
<!--                                                    value="#{bundleAnalysis['recode.howToEnterCondition.details']}"/>-->
<!--                                </div>-->
<!--                            </ice:panelGroup>-->
<!--                    </ice:panelGrid>-->
                    <!-- end of help panel -->
                    <!-- recoding table panel -->
<!--                    <ice:dataTable id="recodeTable" -->
<!--                        binding="#{AnalysisPage.recodeTable}"-->
<!--                        var="rd"-->
<!--                        value="#{AnalysisPage.recodeDataList}"-->
<!--                        rendered="false"-->
<!--                        cellpadding="0" cellspacing="0" -->
<!--                        columnClasses="vdcRecodesColA, vdcRecodesColB, vdcRecodesColB, vdcRecodesColB, vdcRecodesColB, vdcRecodesColB, vdcRecodesColB, vdcRecodesColB" -->
<!--                        headerClass="vdcRecodesHeader" -->
<!--                        style="margin-top: 20px">-->
<!-- -->
<!--                        <ice:column id="recodeClDropx">-->
<!--                            <f:facet name="header">-->
<!--                                <ice:outputText id="recodeHdrDrop" -->
<!--                                    value="#{bundleAnalysis['recode.valueTable.drop.header']}"/>-->
<!--                            </f:facet>-->
<!--                            <ice:selectBooleanCheckbox-->
<!--                                id="recodeDropValueCheckboxx"-->
<!--                                binding="#{AnalysisPage.recodeDropValueCheckboxx}" -->
<!--                                value="#{rd[0]}" -->
<!--                                title="#{bundleAnalysis['recode.valueTable.drop.checkbox']}"-->
<!--                                immediate="true"/>   -->
<!--                        </ice:column>-->
<!--                        <ice:column id="recodeClVariable">-->
<!--                            <f:facet name="header">-->
<!--                                <ice:outputText id="recodeHdrVariable" -->
<!--                                    value="#{AnalysisPage.currentRecodeVariableName}"/>-->
<!--                            </f:facet>-->
<!--                            <ice:inputText  id="recodeVariableNameBox"-->
<!--                                value="#{rd[3]}" -->
<!--                                size="10"/>-->
<!--                        </ice:column>-->
<!--                        <ice:column id="recodeClArrow">-->
<!--                            <f:facet name="header">-->
<!--                            </f:facet>-->
<!--                            <ice:graphicImage-->
<!--                                alt="Information"-->
<!--                                title="Information"-->
<!--                                styleClass="vdcNoBorders"-->
<!--                                style="vertical-align: middle"-->
<!--                                value="/resources/images/arrow_right.gif"/>-->
<!--                        </ice:column>-->
<!--                        <ice:column id="recodeClValue">-->
<!--                            <f:facet name="header">-->
<!--                                <ice:outputText id="recodeHdrValue" -->
<!--                                    value="#{bundleAnalysis['recode.valueTable.value.header']}"/>-->
<!--                            </f:facet>-->
<!--                            <ice:inputText id="recodeValueBox" -->
<!--                                binding="#{AnalysisPage.recodeValueBox}"-->
<!--                                immediate="true"-->
<!--                                value="#{rd[1]}"-->
<!--                                size="10"/>-->
<!--                        </ice:column>-->
<!--                        <ice:column id="recodeClValueLabel">-->
<!--                            <f:facet name="header">-->
<!--                                <ice:outputText id="recodeHdrValueLabel" -->
<!--                                    value="#{bundleAnalysis['recode.valueTable.valuelabel.header']}"/>-->
<!--                            </f:facet>-->
<!--                            <ice:inputText id="recodeValueLabelBox"-->
<!--                                immediate="false"-->
<!--                                value="#{rd[2]}" -->
<!--                                size="25"/>-->
<!--                        </ice:column>-->
<!--                    </ice:dataTable>-->
                    <!-- end of recoding table -->
<!--                    <br />-->
<!--                    <ice:commandButton id="addValueRangeBttn" -->
<!--                        binding="#{AnalysisPage.addValueRangeBttn}"-->
<!--                        value="#{bundleAnalysis['recode.button.addValue']}"-->
<!--                        actionListener="#{AnalysisPage.addValueRange}"-->
<!--                        rendered ="false"/>-->
<!--                    <ice:panelGrid id="groupPanel18" -->
<!--                        columns="1" styleClass="dvnFormPaddingTop">-->
<!--                        <ice:commandButton id="recodeBttn"-->
<!--                            binding="#{AnalysisPage.recodeButton}" -->
<!--                            value="#{bundleAnalysis['recode.button.save']}"-->
<!--                            actionListener="#{AnalysisPage.saveRecodedVariable}"-->
<!--                            disabled="true" />-->
<!--                        <ice:outputText id="msgSaveRecodeBttn"-->
<!--                            binding="#{AnalysisPage.msgSaveRecodeBttn}" -->
<!--                            rendered="false"-->
<!--                            escape="false"-->
<!--                            styleClass="errorMessage"/>-->
<!--                    </ice:panelGrid>-->
<!--                </ice:panelGrid> recodeTableArea -->
<!--                </ice:column>-->
<!--            </ice:panelGrid> end 2nd column  -->
<!--        </ice:panelGrid>-->
<!--    </ice:panelGrid>-->
    </ice:panelTab>
<!-- 3. EDA -->
<ice:panelTab
    id="tabEda"
    label="#{bundleAnalysis['eda.tab.text']}"
    title="Calculate Numeric and Graphic Summaries">
    <ice:panelGrid id="layoutPanel4"
        columns="1"
        layout="flow" 
        style="width: 100%;">

        <ice:panelGrid id="gridPanel2" 
            cellpadding="0" cellspacing="0" 
            columnClasses="vdcAnalysisCol1, vdcAnalysisCol2" 
            columns="2" width="100%">

            <ice:panelGrid id="groupPanel3"
                columns="1">
                <ice:outputLabel id="mListboxEdaLabel" 
                    for="mListboxEda" 
                    value="#{bundleAnalysis['eda.selectedVarBox.title']}" />
                <ice:selectManyListbox id="mListboxEda" 
                    size="10" 
                    disabled="true">
                    <f:selectItems id="itemsEda"  
                         value="#{AnalysisPage.varSetAdvStat}"/>   
                </ice:selectManyListbox>
            </ice:panelGrid>

            <ice:panelGrid id="groupPanel4"
                columns="1">
                <ice:panelGroup styleClass="vdcHelpText">
                    <ice:graphicImage
                        alt="Information"
                        title="Information"
                        value="/resources/images/icon_info.gif"/>
                    <ice:outputText id="outputText21" 
                        value="#{bundleAnalysis['eda.instruction']}"/>
                </ice:panelGroup>
                <ice:selectManyCheckbox id="edaOptionSet"
                    binding="#{AnalysisPage.edaOptionSet}"
                    value="#{AnalysisPage.edaOptionSelected}"
                    immediate="true"
                    partialSubmit="true"
                    layout="pageDirection">
                    <f:selectItem  id="edaOptionNumeric" 
                        itemLabel="#{bundleAnalysis['eda.option.numeric']}" 
                        itemValue="#{AnalysisPage.edaOptionItems[0]}"/>
                    <f:selectItem  id="edaOptionGraphic" 
                        itemLabel="#{bundleAnalysis['eda.option.graphic']}"  
                        itemValue="#{AnalysisPage.edaOptionItems[1]}"/>
                </ice:selectManyCheckbox>
                
                <ice:outputText  id="msgEdaButton"
                    binding="#{AnalysisPage.msgEdaButton}" 
                    visible="false" escape="false" 
                    styleClass="errorMessage" 
                    value="#{AnalysisPage.msgEdaButtonTxt}"/>
                <br />
                <ice:commandButton  id="edaBttn"
                    binding="#{AnalysisPage.edaButton}" 
                    onclick="disableThis(this);"
                    disabled="true" 
                    value="#{bundleAnalysis['eda.button.submit']}" 
                    action="#{AnalysisPage.edaAction}"/>
            </ice:panelGrid>
        </ice:panelGrid>
    </ice:panelGrid>
</ice:panelTab>
<!-- 5. advStat -->
<ice:panelTab
    id="tabAdvStat"
    label="#{bundleAnalysis['advStat.tab.text']}"
    title="Advanced Statistical Modeling">
    <ice:panelGrid id="layoutPanel5"
        columns="1"
        style="width: 100%;">

        <ice:panelGrid id="gridPanel5"
            cellpadding="0" 
            cellspacing="0" 
            columnClasses="vdcAnalysisCol1, vdcAnalysisCol2" 
            columns="2"  
            width="100%">

            <ice:panelGrid id="groupPanel6"
                columns="1">
                <ice:outputLabel id="listboxAdvStatLabel" 
                    for="listboxAdvStat" 
                    value="#{bundleAnalysis['advStat.selectedVarBox.title']}" />
                <ice:selectManyListbox id="listboxAdvStat" 
                    binding="#{AnalysisPage.listboxAdvStat}"
                    value="#{AnalysisPage.advStatSelectedVarLBox}"
                    immediate="true"
                    size="10">
                   <f:selectItems id="itemsDwnld"  
                         value="#{AnalysisPage.varSetAdvStat}"/>
               </ice:selectManyListbox>

            </ice:panelGrid><!-- groupPanel6 -->
            <!-- end of LHS -->
            
            <!-- RHS section of the tab -->
            <ice:panelGrid id="groupPanel7" 
                columns="1" >

                <!-- model menu list -->

                <ice:panelGrid id="gridPanel8out"
                    cellpadding="0" cellspacing="0" 
                    columnClasses="vdcAdvAnalysisCol1, vdcAdvAnalysisCol2" 
                    columns="1" >

                    <ice:panelGrid id="gridPanel8above"
                        cellpadding="0" 
                        cellspacing="0" 
                        columnClasses="vdcAdvAnalysisCol1, vdcAdvAnalysisCol2" 
                        columns="1" >

                        <ice:selectOneMenu id="dropDown1"
                            binding="#{AnalysisPage.dropDown1}"
                            value="#{AnalysisPage.advModelDropdownValue}"
                            valueChangeListener="#{AnalysisPage.dropDown1_processValueChange}"
                            immediate="true"
                            partialSubmit="true">
                            <f:selectItems 
                                value="#{AnalysisApplicationBean.modelMenuOptions}"/>
                        </ice:selectOneMenu>

                        <div jsfc="ice:panelGroup" id="modelInfoBox" styleClass="vdcHelpText"
                             binding="#{AnalysisPage.gridPanelModelInfoBox}"
                             rendered="#{AnalysisPage.gridPanelModelInfoBoxRendered}">
                            <ice:graphicImage styleClass="dvn_icon"
                                alt="Information" 
                                title="Information" 
                                value="/resources/images/icon_info.gif"/>
                            <ice:outputLink 
                                value="#{AnalysisPage.modelHelpLinkURL}"
                                target="_blank"
                                style="padding-left: .5em;">
                                <ice:outputText 
                                    value="#{bundleAnalysis['advStat.model.helpInfo.header']}"/>                       
                            </ice:outputLink>
                        </div>
                    </ice:panelGrid><!-- end: gridPanel8above -->

                    <ice:panelGroup id="groupPanel8below" 
                        binding="#{AnalysisPage.groupPanel8below}" 
                        rendered="#{AnalysisPage.groupPanel8belowRendered}">
                        <ice:panelGrid id="gridPanel8"
                            cellpadding="0" 
                            cellspacing="0" 
                            columnClasses="vdcAdvAnalysisCol1, vdcAdvAnalysisCol2" 
                            columns="2" >

                            <!-- column of variable boxes-->
                            <ice:panelGrid id="groupPanel8"
                                columns="1"> 
                                <!-- 1st box panel: usually dependent -->
                                <ice:panelGroup id="groupPanel12"
                                    binding="#{AnalysisPage.groupPanel12}" 
                                    rendered="true" >

                                    <ice:panelGrid id="gridPanel12"
                                        columns="2" >

                                        <ice:panelGrid id="gridPanel12in"
                                            columns="1" >

                                            <ice:commandButton id="moveVar1Bttn"
                                                binding="#{AnalysisPage.button4}"
                                                actionListener="#{AnalysisPage.addVarBoxR1}"
                                                partialSubmit="true"
                                                value=" &gt; "/>
                                            <ice:outputText id="msgMoveVar1Bttn"
                                                binding="#{AnalysisPage.msgMoveVar1Bttn}" 
                                                rendered="false"
                                                escape="false"
                                                styleClass="errorMessage"/>
                                            <ice:commandButton id="moveVar1Bttnb"
                                                binding="#{AnalysisPage.button4b}"
                                                actionListener="#{AnalysisPage.removeVarBoxR1}"
                                                partialSubmit="true"
                                                value=" &lt; "/>

                                        </ice:panelGrid>
                                        <ice:panelGrid id="gridPanel12r"
                                            columns="1">
                                            <ice:outputLabel id="varListbox1Lbl" 
                                                binding="#{AnalysisPage.varListbox1Lbl}"
                                                for="moveVarListbox1"
                                                value="1st box"/>
                                            <ice:selectManyListbox id="moveVarListbox1"
                                                binding="#{AnalysisPage.advStatVarListboxR1}" 
                                                value="#{AnalysisPage.advStatSelectedVarRBox1}"
                                                immediate="true"
                                                size="3">
                                                <f:selectItems id="advStatVarRBox1"
                                                    value="#{AnalysisPage.advStatVarRBox1}" />
                                            </ice:selectManyListbox>
                                            <!-- label="{bundleAnalysis['advStat.modelVarbox.dependent.label']}"-->
                                        </ice:panelGrid>
                                    </ice:panelGrid>
                                </ice:panelGroup><!-- groupPanel12 -->

                                <!-- 2nd box panel: usually independent -->
                                <ice:panelGroup id="groupPanel13"
                                    binding="#{AnalysisPage.groupPanel13}" 
                                    rendered="false">

                                    <ice:panelGrid id="gridPanel13"
                                        columns="2">

                                        <ice:panelGrid id="gridPanel13in" 
                                            columns="1" >

                                            <ice:commandButton id="moveVar2Bttn"
                                                binding="#{AnalysisPage.button5}" 
                                                actionListener="#{AnalysisPage.addVarBoxR2}"
                                                value=" &gt; "/>

                                            <ice:outputText id="msgMoveVar2Bttn"
                                                binding="#{AnalysisPage.msgMoveVar2Bttn}" 
                                                rendered="false"
                                                escape="false"
                                                styleClass="errorMessage"/>

                                            <ice:commandButton id="moveVar2Bttnb"
                                                binding="#{AnalysisPage.button5b}" 
                                                actionListener="#{AnalysisPage.removeVarBoxR2}"
                                                value=" &lt; "/>
                                        </ice:panelGrid>
                                        <ice:panelGrid id="gridPanel13r"
                                            columns="1">
                                            <ice:outputLabel id="varListbox2Lbl" 
                                                binding="#{AnalysisPage.varListbox2Lbl}"
                                                for="moveVarListbox2" 
                                                value="2nd box"/>

                                            <ice:selectManyListbox id="moveVarListbox2"
                                                binding="#{AnalysisPage.advStatVarListboxR2}" 
                                                value="#{AnalysisPage.advStatSelectedVarRBox2}"
                                                immediate="true"
                                                size="3">
                                                <f:selectItems id="advStatVarRBox2" 
                                                    value="#{AnalysisPage.advStatVarRBox2}"/>
                                            </ice:selectManyListbox>
                                            <!-- label="{bundleAnalysis['advStat.modelVarbox.explanatory.label']}"-->
                                        </ice:panelGrid>
                                    </ice:panelGrid>
                                </ice:panelGroup><!-- groupPanel13 -->

                                <!-- 3rd box panel: usually for models of factor anlysis-->

                                <ice:panelGroup id="groupPanel14"
                                    binding="#{AnalysisPage.groupPanel14}"  
                                    rendered="false">

                                    <ice:panelGrid id="gridPanel14"
                                        columns="2">

                                        <ice:panelGrid id="gridPanel14in"
                                            columns="1">

                                            <ice:commandButton id="moveVar3Bttn" 
                                                binding="#{AnalysisPage.button6}" 
                                                actionListener="#{AnalysisPage.addVarBoxR3}"
                                                value=" &gt; "/>

                                            <ice:outputText id="msgMoveVar3Bttn"
                                                binding="#{AnalysisPage.msgMoveVar3Bttn}" 
                                                rendered="false"
                                                escape="false"
                                                styleClass="errorMessage"/>

                                            <ice:commandButton id="moveVar3Bttnb" 
                                                binding="#{AnalysisPage.button6b}" 
                                                actionListener="#{AnalysisPage.removeVarBoxR3}"
                                                value=" &lt; "/>

                                        </ice:panelGrid>
                                        <ice:panelGrid id="gridPanel14r"
                                            columns="1">
                                            <ice:outputLabel id="varListbox3Lbl" 
                                                binding="#{AnalysisPage.varListbox3Lbl}"
                                                for="moveVarListbox3"
                                                value="3rd box"/>
                                            <ice:selectManyListbox id="moveVarListbox3"
                                                binding="#{AnalysisPage.advStatVarListboxR3}" 
                                                value="#{AnalysisPage.advStatSelectedVarRBox3}"
                                                immediate="true"
                                                size="3">
                                                <f:selectItems id="advStatVarRBox3"
                                                    value="#{AnalysisPage.advStatVarRBox3}"/>
                                            </ice:selectManyListbox>
                                            <!-- label="{bundleAnalysis['advStat.modelVarbox.observed.label']}"-->
                                        </ice:panelGrid>
                                    </ice:panelGrid>
                                </ice:panelGroup><!-- groupPanel14 -->

                                <!-- end of column of var boxes -->
                            </ice:panelGrid><!-- groupPanel8 -->

                            <!-- column of option panes -->
                            <ice:panelGrid id="groupPanel9"
                                columns="1">


                                <!-- output-opton block -->

                                <ice:panelGrid id="groupPanel25" 
                                    columns="1"
                                    style="border: 1px groove #999999; padding: 2px; ">

                                    <!-- Output-option block: checkbox set -->
                                    <ice:outputLabel id="outputText45"
                                        for="chkbxAdvStatOutputOpt"
                                        value="Output Options"/>

                                    <ice:selectManyCheckbox 
                                        id="chkbxAdvStatOutputOpt" 
                                        binding="#{AnalysisPage.chkbxAdvStatOutputOpt}"
                                        layout="pageDirection"
                                        rendered="true" >
                                        <f:selectItems 
                                            value="#{AnalysisPage.chkbxAdvStatOutputOptMap}"/>
                                    </ice:selectManyCheckbox>

                                    <ice:selectManyCheckbox 
                                        id="chkbxAdvStatOutputXtbOpt" 
                                        binding="#{AnalysisPage.chkbxAdvStatOutputXtbOpt}"
                                        layout="pageDirection"
                                        rendered="false">
                                        <f:selectItems 
                                            value="#{AnalysisPage.chkbxAdvStatOutputXtbOptMap}"/>
                                    </ice:selectManyCheckbox>
                                </ice:panelGrid><!-- groupPanel25 -->
                                 <br />
                                <!-- Analysis option block: complex -->

                                <ice:panelGrid id="analysisOptionPanel"
                                    binding="#{AnalysisPage.analysisOptionPanel}" 
                                    columns="1" 
                                    style="border: 1px groove #999999; padding: 2px; ">
                                    <ice:outputLabel 
                                        id="outputText46" 
                                        for="groupPanelSetxOption"
                                        value="Analysis Options"/>
                                    <!-- br /  -->
                                    <ice:panelGrid id="groupPanelSetxOption"
                                        binding="#{AnalysisPage.setxOptionPanel}" 
                                        columns="1">
                                        <!-- simulation: checkbox -->
                                        <ice:panelGrid id="caseingSimulaton" columns="2"> 
                                        <ice:selectBooleanCheckbox id="simulationPanel" 
                                             binding="#{AnalysisPage.simulationPanel}" 
                                             immediate="true"
                                             valueChangeListener="#{AnalysisPage.showHideSimulationsOptPanel}"
                                             partialSubmit="true" />
                                        <ice:outputLabel for="simulationPanel" 
                                            value="Simulations" />
                                        </ice:panelGrid>
                                        <!-- br / -->
                                        <ice:panelGrid
                                            id="groupPanelSimTypeChoice" 
                                            binding="#{AnalysisPage.groupPanelSimTypeChoice}"
                                            rendered="false"
                                            columns="1"
                                            style="border: 1px groove #999999; padding: 2px;">
                                            <!-- contional simulation: radio selection -->

                                            <ice:outputLabel 
                                                id="outputTextSimchoice" 
                                                for="radioSimTypeChoice"
                                                value="#{bundleAnalysis['advStat.simulation.optionPanel']}"/>
                                            <ice:selectOneRadio
                                                id="radioSimTypeChoice"
                                                binding="#{AnalysisPage.radioSimTypeChoice}"
                                                valueChangeListener="#{AnalysisPage.showHideSimCndtnOptPanel}"
                                                value="#{AnalysisPage.radioSimTypeChoiceSelected}"
                                                immediate="true"
                                                layout="pageDirection"
                                                partialSubmit="true">
                                                  <f:selectItems  
                                                      value="#{AnalysisPage.simOptionMap}" />
                                            </ice:selectOneRadio>


                                            <!-- gui when the option of select values is chosen-->
                                            <!-- br / -->
                                            <ice:panelGrid
                                                id="groupPanelSimNonDefault"
                                                binding="#{AnalysisPage.groupPanelSimNonDefault}"
                                                columns="1"
                                                style="border: 1px groove #999999; margin: 2px; padding: 2px; "
                                                rendered="false" >
                                                    
                                                <!--1st option: Explnatory variable values -->
                                                <ice:outputLabel 
                                                    id="setxlabel1"
                                                    for="gridPanel11"
                                                    value="#{bundleAnalysis['advStat.simulation.setValues.values']}" />
                                                <ice:panelGrid id="gridPanel11" 
                                                    binding="#{AnalysisPage.gridPanel11}" 
                                                    columns="3">

                                                    <ice:selectOneMenu id="dropDown2"
                                                        binding="#{AnalysisPage.dropDown2}"  
                                                        immediate="true">
                                                        <f:selectItems id="itemsDropDown2"  
                                                             value="#{AnalysisPage.setxDiffVarBox1}"/>
                                                    </ice:selectOneMenu>

                                                    <ice:outputText id="staticText2" 
                                                        value=" = "/>
                                                    <ice:inputText id="textField10" 
                                                        binding="#{AnalysisPage.textField10}" 
                                                        size="10"/>
                                                </ice:panelGrid>

                                                <!-- 2nd option: Value for the first difference(optional)-->

                                                <ice:outputText 
                                                    id="setxlabel2"
                                                    for="gridPanel10"
                                                    value="#{bundleAnalysis['advStat.simulation.setValues.diff']}" />
                                                <ice:panelGrid id="gridPanel10"
                                                     binding="#{AnalysisPage.gridPanel10}"
                                                     columns="3" >

                                                    <ice:selectOneMenu id="dropDown3" 
                                                        binding="#{AnalysisPage.dropDown3}" 
                                                        immediate="true">
                                                        <f:selectItems id="itemsDropDown3"  
                                                             value="#{AnalysisPage.setxDiffVarBox2}"/>
                                                    </ice:selectOneMenu>
                                                    <ice:outputText id="staticText1" 
                                                        value=" = "/>
                                                    <ice:inputText id="textField8" 
                                                        binding="#{AnalysisPage.textField8}" 
                                                        size="10"/>
                                                </ice:panelGrid>
                                            </ice:panelGrid><!-- groupPanelSimNonDefault -->
                                            <!-- /ui:panelGroup --><!-- groupPanel22 -->
                                        </ice:panelGrid><!-- groupPaneSimChoice -->
                                        <!-- /ui:panelGroup --><!--groupPanel20 -->

                                        <!-- checkbox: Sensitivity analysis -->
                                        <!--groupPanel23 -->
                                    </ice:panelGrid>
                                    <!-- checkbox: Missing Values -->

                                </ice:panelGrid><!-- analysisOptionPanel-->


                                <ice:outputText  id="msgAdvStatButton" 
                                    binding="#{AnalysisPage.msgAdvStatButton}" 
                                    visible="false" escape="false" 
                                    styleClass="errorMessage" 
                                    value="#{AnalysisPage.msgAdvStatButtonTxt}"/>
                                <br />
                                <ice:commandButton id="advStatBttn" 
                                    disabled="true"
                                    onclick="disableThis(this);"
                                    binding="#{AnalysisPage.advStatButton}" 
                                    value="#{bundleAnalysis['advStat.button.submit']}"
                                    action="#{AnalysisPage.advStatAction}" />

                                <!-- end of  column of opion panes-->
                            </ice:panelGrid><!-- groupPanel9: option panes -->

                        </ice:panelGrid><!-- gridPanel8: variable boxes and option panes -->
                    </ice:panelGroup><!-- groupPanel8below -->
                </ice:panelGrid><!-- gridPanel8out-->
            </ice:panelGrid><!-- groupPanel7--><!-- end of the RHS of the tab -->

        </ice:panelGrid><!-- gridPanel5 -->
    </ice:panelGrid><!-- layoutPanel5 -->
</ice:panelTab><!--/ice:tab advStat-->

            </ice:panelTabSet><!--/ice:tabSet -->
            
            
            <!-- end of tab block -->
        
        
            <ice:panelGrid id="pgSubsettingInstruction"
                columns="1" 
                cellpadding="0" cellspacing="0"
                style="margin-left: 8px; margin-top: 10px" width="98%">
                
                <div jsfc="ice:panelGroup" id="wrapSubsettingInstruction" styleClass="vdcHelpText"
                    rendered="#{AnalysisPage.wrapSubsettingInstructionRendered}">
                    <ice:graphicImage styleClass="dvn_icon"
                        alt="Information" 
                        title="Information"
                        value="/resources/images/icon_info.gif" />
                    <ice:outputText id="txtSubsettingInstruction"
                        binding="#{AnalysisPage.txtSubsettingInstruction}" 
                        value="#{bundleAnalysis['subsettingInstruction']}" />
                </div>
               <ice:panelGroup id="wrapNonSubsettingInstruction" 
                   block="true" 
                   styleClass="successMessage"
                   rendered="#{AnalysisPage.wrapNonSubsettingInstructionRendered}">
                   <ice:outputText id="txtNonSubsettingInstruction"
                       binding="#{AnalysisPage.txtNonSubsettingInstruction}"
                       value="#{bundleAnalysis['nonSubsettingInstruction']}" />
               </ice:panelGroup>
                
                <ice:outputText id="msgVariableSelection"
                    binding="#{AnalysisPage.msgVariableSelection}" 
                    visible="false"
                    escape="false"
                    styleClass="errorMessage"/>
            </ice:panelGrid>
            
            <!-- search box -->
        
            <ice:panelGrid id="gridPanel9"
                columns="3"
                columnClasses="vdcVarHeaderCol1, vdcVarHeaderCol1, vdcVarHeaderCol2"
                cellpadding="0" cellspacing="0"
                style="margin-top: 1em; margin-bottom: 0;" width="100%">
                <!--column 1 -->
                <ice:panelGrid id="groupPanel16"
                    columns="1">
                    
                    <ice:outputText id="outputText47" 
                        rendered="false" 
                        styleClass="vdcSubHeaderColor" 
                        value="#{bundleAnalysis['varSearch.displaylabel.initial']}"/>
                    
                    <ice:outputText id="outputText3"
                        escape="false"
                        styleClass="vdcSubHeaderColor" 
                        value="#{bundleAnalysis['varSearch.displaylabel.afterVarSearch']}" 
                        rendered="false" />
                    
                    <ice:outputText id="outputText2"
                        rendered="false" 
                        value="#{bundleAnalysis['varSearch.displaylabel.afterSelected']}"/>
                    
                    
                    <ice:commandLink id="linkAction3" rendered="false">
                        <ice:outputText id="linkAction3Text" 
                            value="#{bundleAnalysis['varSearch.displayButton.inital']}"/>
                    </ice:commandLink>
                    
                    <ice:commandLink  id="linkAction4" rendered="false">
                        <ice:outputText id="linkAction4Text" 
                            value="#{bundleAnalysis['varSearch.displayButton.afterSearch']}"/>
                    </ice:commandLink>
                    
                    <ice:commandLink id="linkAction5" rendered="false">
                        <ice:outputText id="linkAction5Text" 
                            value="#{bundleAnalysis['varSearch.displayButton.afterSelected']}"/>
                    </ice:commandLink>
                </ice:panelGrid>
                <!-- column 2-->
                <ice:panelGrid id="groupPanel19">
                    <ice:inputText id="textField4"
                        binding="#{AnalysisPage.textField4}"
                        rendered="false"/>
                    <ice:commandButton id="button8" 
                        value="#{bundleAnalysis['varSearch.button.search']}"
                        rendered="false"/>
                </ice:panelGrid>
                <!-- column 3-->
                <ice:panelGrid id="groupPanel17" style="margin-left:80%;">
                    <ice:panelGroup>
                    <ice:outputLabel id="howManyRowsLabel"
                    value="Show "/>
                    <ice:selectOneMenu id="howManyRows"
                                 binding="#{AnalysisPage.howManyRows}"  
                                 value="#{AnalysisPage.selectedNoRows}"
                                 valueChangeListener="#{AnalysisPage.howManyRows_processValueChange}"
                                 disabled="false"
                                 partialSubmit="true"
                                 immediate="true">
                         <f:selectItems value="#{AnalysisPage.howManyRowsOptions}"/>
                    </ice:selectOneMenu>
                    </ice:panelGroup>
                </ice:panelGrid>
            </ice:panelGrid>
            <!-- data table -->
            <ice:panelGrid id="pgDataTable" styleClass="pgDataTable">
              <ice:panelGrid cellpadding="0" cellspacing="0" border="0" columns="2" id="gridPanel22"
                                             style="width: 100%; margin-top: 1em;"
                                             styleClass="dvnManageTableTop" columnClasses="dvnManageTableTotals, dvnPaginatorWrap">
                <div jsfc="ice:panelGroup" id="groupPanel55">
                  <span class="dvnVariableInfoTableHdr">Variable Information Table</span>
                </div>
                <div jsfc="ice:panelGroup" styleClass="dvnPaginatorWrap">
                  <ice:dataPaginator id="dataScroller1" styleClass="dvnPaginatorRight"
                      binding="#{AnalysisPage.dataScroller1}"
                      actionListener="#{AnalysisPage.processDataScroller1}"
                      for="dataTable1" paginator="true"
                      fastStep="3" paginatorMaxPages="4" renderFacetsIfSinglePage="false">
                      <f:facet name="first">
                          <ice:graphicImage url="/resources/icefaces/dvn_rime/css-images/arrow-first.gif" title="First Page"/>
                      </f:facet>
                      <f:facet name="last">
                          <ice:graphicImage url="/resources/icefaces/dvn_rime/css-images/arrow-last.gif" title="Last Page"/>
                      </f:facet>
                      <f:facet name="previous">
                          <ice:graphicImage url="/resources/icefaces/dvn_rime/css-images/arrow-previous.gif" title="Previous Page"/>
                      </f:facet>
                      <f:facet name="next">
                          <ice:graphicImage url="/resources/icefaces/dvn_rime/css-images/arrow-next.gif" title="Next Page"/>
                      </f:facet>
                      <f:facet name="fastforward">
                          <ice:graphicImage url="/resources/icefaces/dvn_rime/css-images/arrow-ff.gif" title="Fast Forward"/>
                      </f:facet>
                      <f:facet name="fastrewind">
                          <ice:graphicImage url="/resources/icefaces/dvn_rime/css-images/arrow-fr.gif" title="Fast Backwards"/>
                      </f:facet>
                  </ice:dataPaginator>
                </div>
              </ice:panelGrid>

              <ice:dataTable id="dataTable1"
                   binding="#{AnalysisPage.data}"
                   var="currentRow"
                   value="#{AnalysisPage.dt4Display}"
                   rows="10"
                   headerClasses="vdcVariablesColHdr1, vdcVariablesColHdr2, vdcVariablesColHdr3, vdcVariablesColHdr4, vdcVariablesColHdr5, vdcVariablesColHdr6"
                   columnClasses="vdcVariablesCol1, vdcVariablesCol2, vdcVariablesCol3, vdcVariablesCol4, vdcVariablesCol5, vdcVariablesCol6"
                   title="Variable Information"
                   rowClasses="list-row-odd, list-row-even"
                   style="width: 100%; margin: 0;">
                  <ice:column id="column1">
                      <f:facet name="header">
                          <ice:selectBooleanCheckbox id="checkboxSelectUnselectAll"
                               binding="#{AnalysisPage.checkboxSelectUnselectAll}"
                               value="#{AnalysisPage.checkboxSelectUnselectAllSelected}"
                               rendered="#{AnalysisPage.checkboxSelectUnselectAllRendered}"
                               immediate="true"
                               valueChangeListener="#{AnalysisPage.selectUnselectAllCheckbox}"
                               partialSubmit="true"
                               title="select or unselect all rows in this view" />
                      </f:facet>
                      <ice:selectBooleanCheckbox id="varCheckbox"
                           binding="#{AnalysisPage.varCheckbox}"
                           value="#{currentRow[0]}"
                           title="#{currentRow[3]}"
                           valueChangeListener="#{AnalysisPage.updateCheckBoxState}"
                           partialSubmit="true"/>
                  </ice:column>
                  <ice:column id="column2">
                      <f:facet name="header">
                          <ice:outputText id="outputText6"
                              value="#{bundleAnalysis['varTable.colHdr.varType']}"/>
                      </f:facet>
                      <ice:outputText id="outputText5"
                          value="#{currentRow[1]}"/>
                  </ice:column>
                  <ice:column id="column3">
                      <f:facet name="header">
                          <ice:outputText id="outputText8"
                              value="#{bundleAnalysis['varTable.colHdr.Id']}" style="visibility:hidden;"/>
                      </f:facet>
                      <ice:outputText id="outputText7"
                          value="#{currentRow[2]}" style="visibility:hidden;"/>
                  </ice:column>
                  <ice:column id="column4">
                      <f:facet name="header">
                          <ice:outputText id="outputText10"
                              value="#{bundleAnalysis['varTable.colHdr.varName']}"/>
                      </f:facet>
                      <ice:outputText id="outputText9"
                          value="#{currentRow[3]}"/>
                  </ice:column>
                  <ice:column id="column5">
                      <f:facet name="header">
                          <ice:outputText id="outputText12"
                              value="#{bundleAnalysis['varTable.colHdr.varLabel']}"/>
                      </f:facet>
                      <ice:outputText id="outputText11"
                          value="#{currentRow[4]}"/>
                  </ice:column>
                  <ice:column id="column6">
                      <f:facet name="header">
                          <ice:outputText id="outputText14"
                              value="#{bundleAnalysis['varTable.colHdr.quickSummary']}"/>
                      </f:facet>
                      <ice:commandButton
                          id="showStatistics"
                          onclick="QSrequested(this.id, '#{currentRow[2]}');return false;"
                          alt="Click to show descriptive statistics"
                          title="Click to show/hide descriptive statistics"
                          image="/resources/images/icon_variables.gif"
                          type="submit"/>
                      <ice:outputText id="varSummaryTable"
                          escape="false" value="#{currentRow[5]}"/>
                  </ice:column>
              </ice:dataTable>

<!-- Paginator with page controls -->

<!-- Display counts about the table and the currently displayed page -->

<!-- old scroller was here as a footer -->
            </ice:panelGrid><!-- panelGrid pgDataTable -->
            <ice:panelGrid id="belowDT" styleClass="vdcListRecodeVarTable"
                           columns="1" cellpadding="0" cellspacing="0">
                
                <ice:panelGrid id="pgRecodedVarTable" styleClass="dvnFormPaddingTop"
                    binding="#{AnalysisPage.pgRecodedVarTable}"
                    columns="1" cellpadding="0" cellspacing="0"
                    rendered="false">
                    
                    <ice:outputText id="recodedVarTableTitle"
                        binding="#{AnalysisPage.recodedVarTableTitle}"
                        value="#{bundleAnalysis['recodedVarTable.title']}"/>
                        
<ice:dataTable id="recodedVarTable" styleClass="recodedVarTable"
    binding="#{AnalysisPage.recodedVarTable}" 
    var="rcw"
    value="#{AnalysisPage.recodedVarSet}"
    headerClass="list-header"  
    rowClasses="list-row-odd,list-row-even"
    columnClasses="vdcRecodeVariablesCol0, vdcRecodeVariablesCol1, vdcRecodeVariablesCol2, vdcRecodeVariablesCol3, vdcRecodeVariablesCol4"
    headerClasses="vdcRecodeVariablesColHdr0, vdcRecodeVariablesColHdr1, vdcRecodeVariablesColHdr2, vdcRecodeVariablesColHdr3, vdcRecodeVariablesColHdr4">

    <!-- chekcbox: remove --><!---->
    <ice:column id="RVTcolumn0">
        <f:facet name="header">
            <ice:outputText id="RVThdr0" 
                value="#{bundleAnalysis['recodedVarTable.colHdr.remove']}"/>
        </f:facet>

        <ice:commandLink id="removeRecodedVariable"
            actionListener="#{AnalysisPage.removeRecodedVariable}"
            title="#{bundleAnalysis['recodedVarTable.tooltip.remove']}"
            immediate="true"
            shape="rect" >
            <ice:outputText 
                value="#{bundleAnalysis['recodedVarTable.hyperLink.title.remove']}"/>
        </ice:commandLink>
    </ice:column>

    <!-- variable name --><!---->
    <ice:column id="RVTcolumn1">
        <f:facet name="header">
            <ice:outputText id="RVThdr1" 
                value="#{bundleAnalysis['recodedVarTable.colHdr.varName']}"/>
        </f:facet>
        <ice:outputText id="RVTcolv1" 
            value="#{rcw[0]}"/>
    </ice:column>

    <!-- variable label --><!---->
    <ice:column id="RVTcolumn2">
        <f:facet name="header">
            <ice:outputText id="RVThdr2"
                value="#{bundleAnalysis['recodedVarTable.colHdr.varLabel']}"/>
        </f:facet>
        <ice:outputText id="RVTcolv2"
            value="#{rcw[1]}"/>
    </ice:column>

    <!-- checkbox: modify --><!---->
    <ice:column id="RVTcolumn3">
        <f:facet name="header">
            <ice:outputText id="RVThdr3" 
                value="#{bundleAnalysis['recodedVarTable.colHdr.modify']}"
                visible="false" />
        </f:facet>
        <ice:commandLink id="RVTcolv3" 
            actionListener="#{AnalysisPage.editRecodedVariable}"
            immediate="true" 
            title="#{bundleAnalysis['recodedVarTable.hyperLink.title.modify']}" 
            toolTip="#{bundleAnalysis['recodedVarTable.tooltip.modify']}"
            visible="false"/>
    </ice:column>
    <!-- variable Id  --><!---->
    <ice:column id="RVTcolumn4">
        <f:facet name="header">
            <ice:outputText id="RVThdr4" 
                value=""/>
        </f:facet>
        <ice:outputText id="RVTcolv4"
            value="#{rcw[2]}" visible="false"/> 
    </ice:column>

</ice:dataTable>
                    
                </ice:panelGrid>
            </ice:panelGrid>
            
        </div>
    </div>
        
    </ice:form>
<!-- hr / -->
       
    <script type="text/javascript">
      //<![CDATA[
  function testJs(){
    alert("js test");
  }
  
  function checkParameters(){
    alert("request is submitted");
  }

// for a checkbox
  function showHideMonitorBlock(id, shw){
    var trgt = document.getElementById(id);
    if (shw) {
      trgt.style.display="";
    } else {
      trgt.style.display="none";
    }
  }
 
// show-no show button with a state-dependent button label
function shwNshwLnk(id, srcId, label) {
  // id     whose block to be shown/hidden
  // srcId  button id
  // label  button lable
  var srcEl = document.getElementById(id);
  
  if (srcEl.style.display == "none") {
    srcEl.style.display = "";
    // this part depends on the design of a button
    document.getElementById(srcId).value="Hide " +label;
  } else if (srcEl.style.display == "") {
    srcEl.style.display = "none";
    // this part depends on the design of a button
    document.getElementById(srcId).value ="Show " +label;
  }
}


// show-no show button with a state-dependent button label
function shwNshwTxt(id) {
  // id     whose block to be shown/hidden
  // srcId  button id
  // label  button lable
  var srcEl = document.getElementById(id);
  if (srcEl.style.display == "none") {
    srcEl.style.display = "";
  } else if (srcEl.style.display == "") {
    srcEl.style.display = "none";
  }
}

// disable this element onclick
function disableThis(el) {
    el.disabled = "disabled";
}

//This method resets the hidden field values to address a fix
// made for Opera where the value change event was not being
// fired by the radio buttons under specific conditions
var originalSelection = "";
function setHiddenField(obj) {
    selections = document.getElementById(obj.id).getElementsByTagName("INPUT");
    for (var i = 0; selections[i]; i++) {
        if (selections[i].checked == true && selections[i].value != originalSelection) {
            originalSelection = selections[i];
            document.getElementById('form1:tabSet1:0:hiddenDataDownload').value=selections[i].value;
            break;
        } 
    }
    for (var i = 0; selections[i]; i++) {
        if (selections[i].value != originalSelection) {
            selections[i].checked = false;
        }
    }
}


       // ]]>    
  </script>
       
<input type="button" id="monitorBttn" style="display:none" value="show monitor block" onclick="shwNshwLnk('monitorBlock', 'monitorBttn', 'monitor block');"/>
<div id="monitorBlock" style="display:none">
</div>

<!-- to be renamed to subview -->
</ui:define>
</ui:composition>
</body>

</html>

