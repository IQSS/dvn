<div xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:jsp="http://java.sun.com/JSP/Page"
     xmlns:ice="http://www.icesoft.com/icefaces/component"
     xmlns:dvn="/WEB-INF/tlds/dvn-components"
     class="dvnsetupdataexloprationformblock">

    <div class="dvnFormPadding dvnFormMargin" style="text-align:right;">
        <ice:commandButton type="submit" value="Update" actionListener="#{SetUpDataExplorationPage.saveFilterFragment}" visible="#{SetUpDataExplorationPage.editFilterGroup}"/>
        <ice:commandButton type="submit" value="Cancel" action="#{SetUpDataExplorationPage.cancelFragment}" visible="#{SetUpDataExplorationPage.editFilterGroup}"/>
        <ice:commandButton type="submit" value="Update" action="#{SetUpDataExplorationPage.saveFilterGrouping}" visible="#{SetUpDataExplorationPage.editFilterGrouping}"/>
        <ice:commandButton type="submit" value="Cancel" action="#{SetUpDataExplorationPage.cancelFragment}" visible="#{SetUpDataExplorationPage.editFilterGrouping}"/>
        <ice:commandButton type="submit" value="Done" action="#{SetUpDataExplorationPage.cancelFragment}" visible="#{ SetUpDataExplorationPage.manageFilterTypes}"/>
    </div>
    <div jsfc="ice:panelGroup" rendered="#{SetUpDataExplorationPage.editFilterGroup}" style="margin-bottom:1em;">
        <ice:outputLabel value="Filter"/>
        <ice:inputText id="input_filterGroupName" size="25" maxlength="255"
                       binding="#{SetUpDataExplorationPage.inputFilterGroupName}"/>
    </div>
    <div jsfc="ice:panelGroup" rendered="#{SetUpDataExplorationPage.editFilterGrouping}" style="margin-bottom:1em;">
        <ice:outputLabel value="Group"/>
        <ice:inputText id="input_groupingName" size="25" maxlength="255"
                       binding="#{SetUpDataExplorationPage.inputFilterGroupingName}"/>
    </div>

    <div jsfc="ice:panelGroup" rendered="#{SetUpDataExplorationPage.manageFilterTypes}">
        <ice:outputLabel value="Types"/>
        <ice:dataTable width="100%" cellspacing="0" cellpadding="0" var="type" value="#{SetUpDataExplorationPage.editFilterVarGrouping.varGroupTypesUI}"
                       binding="#{SetUpDataExplorationPage.dataTableManageFilterGroupType}">
              <f:facet name="header">
                    <ice:columnGroup>
                        <ice:headerRow>
                             <ice:column colspan="2" style="text-align:left;">
                                 <ice:outputLabel value="Name" style="font-weight:normal;"/>
                                    <ice:inputText id="input_addFilterType" size="25" maxlength="255"
                                                   binding="#{SetUpDataExplorationPage.inputManageFilterGroupTypeName}"/>
                                    <div class="dvnFormPadding dvnFormMargin" style="display:inline;">
                                        <ice:commandButton type="submit" value="Add" action="#{SetUpDataExplorationPage.saveFilterTypeButton}"/>
                                        <!-- <ice:commandButton type="submit" value="Cancel" action="#{SetUpDataExplorationPage.cancelFilterTypeButton}"/>-->
                                    </div>
                             </ice:column>
                        </ice:headerRow>
                        <ice:headerRow>
                             <ice:column>
                                <ice:outputText value="Name"/>
                             </ice:column>
                             <ice:column>
                                <ice:outputText value="&#160;"/>
                             </ice:column>
                        </ice:headerRow>
                    </ice:columnGroup>
              </f:facet>
              <h:column>
                   <ice:outputText value="#{type.varGroupType.name}" rendered="#{!type.editMode}"/>
                    <ice:inputText size="25" maxlength="255"
                                   rendered="#{type.editMode}" binding="#{SetUpDataExplorationPage.editManageFilterGroupTypeName}"/>
              </h:column>
              <h:column>
                    <ice:commandLink visible="#{!type.editMode}" style="margin-right:1em;"
                                     actionListener="#{SetUpDataExplorationPage.editFilterType}">
                        <ice:outputText style="display:inline;" value="Edit"/>
                    </ice:commandLink>
                    <ice:commandLink visible="#{type.editMode}" style="margin-right:1em;"
                                     actionListener="#{SetUpDataExplorationPage.saveFilterType}">
                         <ice:outputText style="display:inline;" value="Save"/>
                    </ice:commandLink>
                    <ice:commandLink visible="#{!type.editMode}"
                                     actionListener="#{SetUpDataExplorationPage.deleteGroupType}">
                         <ice:outputText style="display:inline;" value="Delete"/>
                    </ice:commandLink>
                </h:column>
        </ice:dataTable>
    </div>

    <div jsfc="ice:panelGroup" rendered="#{SetUpDataExplorationPage.editFilterGroup}" style="margin-bottom:1em;">
        <ice:outputLabel value="Types"/>
        <ice:dataTable width="100%" cellspacing="0" cellpadding="0" var="type" value="#{SetUpDataExplorationPage.editFilterVarGroup.varGroupTypes}"
                       binding="#{SetUpDataExplorationPage.dataTableFilterGroupType}">
                <f:facet name="header">
                    <ice:columnGroup>
                        <ice:headerRow>
                             <ice:column colspan="3" style="text-align:left;">
                                 <ice:outputLabel value="Name" style="font-weight:normal;"/>
                                    <ice:inputText size="25" maxlength="255"
                                                   binding="#{SetUpDataExplorationPage.inputFilterGroupTypeName}"/>
                                    <div class="dvnFormPadding dvnFormMargin" style="display:inline;">
                                        <ice:commandButton type="submit" value="Add" action="#{SetUpDataExplorationPage.saveFilterTypeButton}"/>
                                        <!-- <ice:commandButton type="submit" value="Cancel" action="#{SetUpDataExplorationPage.cancelFilterTypeButton}"/>-->
                                    </div>
                             </ice:column>
                        </ice:headerRow>
                        <ice:headerRow>
                             <ice:column>
                                <ice:outputText value="&#160;"/>
                             </ice:column>
                             <ice:column>
                                <ice:outputText value="Name"/>
                             </ice:column>
                             <ice:column>
                                <ice:outputText value="&#160;"/>
                             </ice:column>
                        </ice:headerRow>
                    </ice:columnGroup>
                </f:facet>
                <ice:column rendered="#{SetUpDataExplorationPage.editFilterGroup}">
                    <ice:selectBooleanCheckbox styleClass="filterVariableCheckBoxes"
                                               partialSubmit="false" value="#{type.selected}"/>
                </ice:column>
                  <h:column>
                       <ice:outputText value="#{type.varGroupType.name}" rendered="#{!type.editMode}"/>
                        <ice:inputText size="25" maxlength="255"
                                       rendered="#{type.editMode}" binding="#{SetUpDataExplorationPage.editFilterGroupTypeName}"/>
                  </h:column>
                  <h:column>
                        <ice:commandLink visible="#{!type.editMode}" style="margin-right:1em;"
                                         actionListener="#{SetUpDataExplorationPage.editFilterType}">
                            <ice:outputText style="display:inline;" value="Edit"/>
                        </ice:commandLink>
                        <ice:commandLink visible="#{type.editMode}" style="margin-right:1em;"
                                         actionListener="#{SetUpDataExplorationPage.saveFilterType}">
                             <ice:outputText style="display:inline;" value="Save"/>
                        </ice:commandLink>
                        <ice:commandLink visible="#{!type.editMode}"
                                         actionListener="#{SetUpDataExplorationPage.deleteGroupType}">
                             <ice:outputText style="display:inline;" value="Delete"/>
                        </ice:commandLink>
                    </h:column>
        </ice:dataTable>
    </div>
    
    <div jsfc="ice:panelGroup" rendered="#{SetUpDataExplorationPage.editFilterGroup}">
        <ice:outputLabel value="Variables"/>
        <ice:dataTable width="100%" cellspacing="0" cellpadding="0" id="genericVariables" var="dataVariableUI" value="#{SetUpDataExplorationPage.dvGenericFilteredListUI}"
                       scrollable="true" scrollHeight="200px" columnWidths="40,348">
            <f:facet name="header">
                <ice:columnGroup>
                    <ice:headerRow>
                         <ice:column colspan="2" styleClass="dvnDataTableHeaderForm">
                             <ice:outputLabel value="Filter" for="filterDataVariable" styleClass="dvnDataTableHeaderFilter"/>
                             <ice:inputText size="25" maxlength="255"
                                              onkeyup="delayedRequestFilter(form,this,event);"
                                              binding="#{SetUpDataExplorationPage.inputVariableFilter}"/>
                         </ice:column>
                    </ice:headerRow>
                    <ice:headerRow>
                         <ice:column style="width:40px;">
                            <ice:selectBooleanCheckbox id="checkAllFilterVars" 
                                                        binding="#{SetUpDataExplorationPage.filterCheckBox}"
                                                        onclick="selectAllFilterVariablesClick();"/>
                         </ice:column>
                         <ice:column style="width:348px;">
                            <ice:outputText value="Name"/>
                         </ice:column>
                    </ice:headerRow>
                </ice:columnGroup>
            </f:facet>
            <ice:column style="width:40px;">
                <ice:selectBooleanCheckbox id="filterVariableCheckbox" styleClass="filterVariableCheckBoxes"
                                            value="#{dataVariableUI.selected}"
                                            onclick="selectOneFilterVariableClick()"/>
            </ice:column>
            <ice:column style="width:348px;">
                <ice:outputLabel value="#{dataVariableUI.dataVariable.name}"/>
            </ice:column>
        </ice:dataTable>
    </div>
</div>
